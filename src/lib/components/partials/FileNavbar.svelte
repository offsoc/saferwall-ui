<script lang="ts">
	import type { Menu } from '$lib/types';

	export let hash = '';
	export let activeFileMenu: Menu.File[] = [];
	export let activeMenu: { name: string; path: string };

	$: isPathActive = (path: string): boolean => path === activeMenu.path;
	$: generateFilePath = (path: string): string => `/files/${hash}/${path}`;
</script>

<section
	data-sveltekit-preload-data="tap"
	class="fnavbar z-10 w-full sticky top-0 bg-white overflow-x-auto no-scroll-style"
>
	<div class="w-full container mx-auto flex">
		<ul class="fnavbar__menu flex w-full space-x-3">
			<li class="fnavbar__item flex-grow inline-flex">
				<a class="fnavbar__link" href="/">
					<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5">
						<use href="/images/icons.svg#icon-cloud" />
					</svg>
					<span>Browse file</span>
				</a>
			</li>
			{#each activeFileMenu as item}
				<li class="fnavbar__item">
					<a
						class="fnavbar__link"
						class:active={isPathActive(item.path)}
						href={generateFilePath(item.path)}>{item.name}</a
					>
				</li>
			{/each}
		</ul>
	</div>
</section>

<style lang="postcss">
	.fnavbar {
		@apply py-4;
		@apply border-b border-gray-400 border-opacity-20;

		&__item {
			@apply flex-shrink-0;
		}

		&__link {
			@apply transition-all duration-200 ease-in-out;
			@apply flex items-center space-x-2 w-auto text-neutral-500;
			@apply p-2.5 px-5 rounded-full font-medium;
		}

		&__link:hover,
		&__link.active {
			@apply bg-primary text-white;
		}
	}
</style>
